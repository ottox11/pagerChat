<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <!-- <meta charset="utf-8" shrink-to-fit=no"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">
    <title>Pager</title>
  </head>
  <body>
    <header>
      <nav class="navbar navbar-light bg-light">
  <a class="navbar-brand" href="#">
    <!-- <img src="/docs/4.3/assets/brand/bootstrap-solid.svg" width="30" height="30" class="d-inline-block align-top" alt=""> -->
    Pager
  </a>
</nav>
    </header>
    <br>

    <div class="container-fluid">
      <form>
  <div class="form-row">
    <div class="form-group col-md-6">
      <label for="device_id">Pager ID</label>
      <select class="form-control" id="device_id">
        <option>0080000004018665</option>
        <option>0080000004018667</option>
        <option>0080000004018668</option>
        <option>0080000004018675</option>
        <option>008000000400B6EA</option>
      </select>
      <br>
          <div class="form-group col-md-9">
          <button type="submit" class="btn btn-outline-info" id="submit1" value=">Ok">Ok</button>
          <button type="submit" class="btn btn-outline-info" id="submit2" value=">Te contacto luego">Te contacto luego</button>
          <button type="submit" class="btn btn-outline-info" id="submit3" value=">En una reunion">En una reunion</button>
          <button type="submit" class="btn btn-outline-info" id="submit4" value=">Emergencia">Emergencia</button>
          </div>
            <br>
            <label for="Textarea1">Escriba su mensaje</label>
            <textarea class="form-control" id="message" rows="8"></textarea>
            <br>
           <div class="form-group col-md-6">
           <button id="submit_button" type="submit" class="btn btn-primary">Enviar</button>
           </div>
           </div>

                <button type="submit" id="temp" name="button">temporal</button>
            <div class="form-group col-md-6">
              <label class="sticker" for="inputPassword4">Conversaci√≥n</label>
              <div class="">
                <div class="border border-secondary rounded rounded-lg">
                  <ol id="yo">
                    <li ></li>
                  </ol>
                        <ol id="pg">
                          <li ></li>
                        </ol>

                  </div>
              </div>
              </div>
</div>
    </div>


</form>

    </div>
    <script src="js/vendor/modernizr-3.7.1.min.js"></script>
<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-3.4.1.min.js"><\/script>')</script>

<!-- Popper JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<script src="js/plugins.js"></script>
<script src="js/main.js"></script>

<script>
  $(() => {

    $("#submit_button").on("click", event => {

      event.preventDefault();

      const device_id = $("#device_id").val();
      const message = $("#message").val();



      $.get(`http://3.85.199.201:80/pagerDownlink?device_id=${device_id}&message=${message}`, function( data ) {

        if( data === "ok") {

           // alert("Message sent successfully");
           var lista = document.getElementById("yo");
           lista.style.display = "block";
           var newLi = document.createElement("li");
           var msn = "Yo:"+' '+ message;
           newLi.append(msn);
           lista.appendChild(newLi);
           $("#message").val("");

        } else {

          alert(data);

        }

      });

    });

    $("#submit1").on("click", event => {

      event.preventDefault();

      const device_id = $("#device_id").val();
      const message = $("#submit1").val();



      $.get(`http://3.85.199.201:80/pagerDownlink?device_id=${device_id}&message=${message}`, function( data ) {

        if( data === "ok") {

           // alert("Message sent successfully");
           var lista = document.getElementById("yo");
           lista.style.display = "block";
           var newLi = document.createElement("li");
           var msn = "Yo:"+' '+ message;
           newLi.append(msn);
           lista.appendChild(newLi);
           $("#message").val("");

        } else {

          alert(data);

        }

      });

    });

    $("#submit2").on("click", event => {

      event.preventDefault();

      const device_id = $("#device_id").val();
      const message = $("#submit2").val();



      $.get(`http://3.85.199.201:80/pagerDownlink?device_id=${device_id}&message=${message}`, function( data ) {

        if( data === "ok") {

           // alert("Message sent successfully");
           var lista = document.getElementById("yo");
           lista.style.display = "block";
           var newLi = document.createElement("li");
           var msn = "Yo:"+' '+ message;
           newLi.append(msn);
           lista.appendChild(newLi);
           $("#message").val("");

        } else {

          alert(data);

        }

      });

    });

    $("#submit3").on("click", event => {

      event.preventDefault();

      const device_id = $("#device_id").val();
      const message = $("#submit3").val();



      $.get(`http://3.85.199.201:80/pagerDownlink?device_id=${device_id}&message=${message}`, function( data ) {

        if( data === "ok") {

           // alert("Message sent successfully");
           var lista = document.getElementById("yo");
           lista.style.display = "block";
           var newLi = document.createElement("li");
           var msn = "Yo:"+' '+ message;
           newLi.append(msn);
           lista.appendChild(newLi);
           $("#message").val("");

        } else {

          alert(data);

        }

      });

    });

    $("#submit4").on("click", event => {

      event.preventDefault();

      const device_id = $("#device_id").val();
      const message = $("#submit4").val();



      $.get(`http://3.85.199.201:80/pagerDownlink?device_id=${device_id}&message=${message}`, function( data ) {

        if( data === "ok") {

           // alert("Message sent successfully");
           var lista = document.getElementById("yo");
           lista.style.display = "block";
           var newLi = document.createElement("li");
           var msn = "Yo:"+' '+ message;
           newLi.append(msn);
           lista.appendChild(newLi);
           $("#message").val("");

        } else {

          alert(data);

        }

      });

    });

    $("#temp").on("click", event => {

      event.preventDefault();

      const device_id = $("#device_id").val();
      const message = $("#message").val();



      $.get(`http://3.85.199.201:80/pagerUplinks?device_id=${device_id}`, function(data) {

        var recibido = data.split("|");

        var longitud = recibido.length;
        recibido.forEach(myFunction);
        function myFunction(item, index) {
          console.log(index,item);

}
      });
           // alert("Message sent successfully");
      //      var lista = document.getElementById("yo");
      //      lista.style.display = "block";
      //      var newLi = document.createElement("li");
      //      var msn = "Yo:"+' '+ message;
      //      newLi.append(msn);
      //      lista.appendChild(newLi);
      //      $("#message").val("");
      //
      //   } else {
      //
      //     alert(data);
      //
      //   }
      //
      });
  });
</script>
  </body>
</html>
